# 破解vip脚本：https://github.com/langkhach270389/Quantumult-X-LK/blob/master/Rewrite/Fake_Vip_Remote.txt
# REJECT 会直接打断命中的请求，REJECT-TINYGIF 会对请求返回 HTTP 200 和一个 1px 透明 GIF 图片（参见 Surge iOS 3.0 Release Note）。
# REJECT-TINYGIF 一般用于解决一些 app 在使用普通 REJECT 后仍然持续进行大量请求，大部分情况下选择 REJECT-TINYGIF 不会出现问题。况且完全可以自定义 Liby.list 和 Tide.list 走 Adblock 之类的策略组，自行选择切换 REJECT 或是 REJECT-TINYGIF。

hostname = spclient.wg.spotify.com, douban.com, doubanio.com, jd.com, jddebug.com, jingxi.com, mp.weixin.qq.com, www.zhihu.com, zhuanlan.zhihu.com, app.bilibili.com, api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, weixin110.qq.com, security.wechat.com, api.m.jd.com, trade-acs.m.taobao.com, account.wps.cn, duckduckgo.com


^(http|https):\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad url response-body "advertisement_num":\d,"advertisement_info":\[.+\], response-body "advertisement_num":0,"advertisement_info":[],

################################################## AD ##################################################

# Spotify 广告
^https?:\/\/spclient\.wg\.spotify\.com\/ad url reject

# 豆瓣广告
^https?:\/\/bizpage\.douban\.com url reject
^https?:\/\/api\.douban\.com\/v2\/app_ads url reject
^https?:\/\/erebor\.douban\.com\/count\/\?ad url reject
^https?:\/\/img\d\.doubanio\.com\/f url reject
^https?:\/\/img\d\.doubanio\.com\/f\/daryl url reject
^https?:\/\/img\d\.doubanio\.com\/img\/files url reject
^https?:\/\/img\d\.doubanio\.com\/view\/biz\/raw\/public url reject
^https?:\/\/img\d\.doubanio\.com\/view\/dale-online\/dale_ad\/ url reject

# 京东去启动广告
URL-REGEX,^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=start$,REJECT-TINYGIF
# 京东开屏广告
https://dns.jd.com/v6 url reject-dict
# 屏蔽京东收集上报
http://.*.jddebug.com url reject-dict
https://wqs.jd.com/portal/wx/storageBridge2?\.shtml url reject
https://uranus.jd.com/log/m url reject-dict
https://m.jingxi.com/webmonitor/collect/biz.json url reject-dict
https://hermes.jd.com/log.gif url reject-dict
https://saturn.jd.com/log/sdk url reject-dict
https://api.m.jd.com/api\?functionId=pingou_rpds_custom url reject-dict
https://api.m.jd.com/api\?functionId=pingou_webmonitor_biz url reject-dict
https://sgm-m.jd.com/h5/custom url reject-dict
https://blackhole.m.jd.com/bypass url reject-dict
https://api.m.jd.com/client.action\?$ url reject-dict
https://ex.m.jd.com/exception_monitor/report url reject-dict
https://api.m.jd.com/client.action\?functionId=getIosDegrade url reject-dict
https://api.m.jd.com/client.action\?functionId=xview2Config url reject-dict
https://mars.jd.com/log/sdk url reject-dict
https:\/\/.+\.m\.jd.com\/m2 url reject-dict
https://lbsgw.m.jd.com/m url reject-dict
https://hawks.jd.com/log url reject-dict
https://perf.m.jd.com/app_monitor/v1/report url reject-dict

# 微信公众号底部广告: https://github.com/NobyDa/Script/blob/master/QuantumultX/File/Wechat.js
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad url script-response-body https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/File/Wechat.js

# 知乎网页广告&推荐列表: https://github.com/id77/QuantumultX/blob/master/Script/zhihu.js
https://www\.zhihu\.com/api/v4/questions/\d+/related-readings url reject-200
https://www\.zhihu\.com/api/v4/answers/\d+/related-readings url reject-200
https://www\.zhihu\.com/api/v4/hot_recommendation url reject-200
https://www\.zhihu\.com/commercial_api/banners_v3/mobile_banner url reject-200
https://zhuanlan\.zhihu\.com/api/articles/\d+/recommendation url reject-200

# Bilibili: https://github.com/toulanboy/scripts/tree/master/bilibili_ad
https:\/\/app\.bilibili\.com\/x\/v2\/((feed\/index)|(splash\/list)) url script-response-body https://raw.githubusercontent.com/toulanboy/scripts/master/bilibili_ad/bilibili_ad.js

# 微博: https://github.com/yichahucha/surge
^https?://(sdk|wb)app\.uve\.weibo\.com(/interface/sdk/sdkad.php|/wbapplua/wbpullad.lua) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_launch.js
^https?://m?api\.weibo\.c(n|om)/2/(statuses/(unread|extend|positives/get|(friends|video)(/|_)(mix)?timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|!/(photos/pic_recommend_status|live/media_homelist)|video/tiny_stream_video_list|photo/info|remind/unread_count) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_ad.js

# 掌上生活启动页: (已影响正常功能，故注释，并将 res.cc.cmbimg.com 从 hostname 中去除)
# ^https?:\/\/res\.cc\.cmbimg\.com\/fsp\/File\/AdPlatformPublic\/* url reject-dict




################################################## JS ##################################################


# 防百毒跳转
# 首用1: (该重写对贴吧不适配，故用(?!tieba)将贴吧排除）
^https?:\/\/(?!tieba).*\.baidu\.com url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.1 Mobile/15E148 Safari/16C50 Quark/604.1 T7/10.3 SearchCraft/2.6.3 (Baidu; P1 8.0.0)$2
^https?:\/\/(?!tieba).*\.baidu\.com\/.* url request-header (\r\n)User-Agent:.+iPhone.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (SymbianOS/9.4; U; Series60/5.0 SonyEricssonP100/01; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/88.0.4324.93 Mobile Safari/537.36 T7/12.20.0.0 SP-engine/2.33.0 baiduboxapp/12.20.5.11(Baidu; P1 10) NABar/1.0 $2
# 备用2: ReWrite(防跳转商店下载baidu，不防直接跳转baidu)

# 微信打不开的链接会进行跳转，包括抖音淘宝等链接甚至可扫描支付宝二维码: https://github.com/zZPiglet/Task/blob/master/asset/UnblockURLinWeChat.js
^https\:\/\/(weixin110\.qq|security.wechat)\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi\? url script-response-body https://raw.githubusercontent.com/zZPiglet/Task/master/asset/UnblockURLinWeChat.js
# 备用2: https://github.com/HotKids/Rules/blob/master/Script/weixin110.js
^https?:\/\/weixin110\.qq\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi url script-response-body https://raw.githubusercontent.com/HotKids/Rules/master/Script/weixin110.js
# 备用3: ReWrite

# 京东淘宝历史价格
^https?://api\.m\.jd\.com/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig) url script-response-body https://service.2ti.st/QuanX/Script/jd_tb_price/main.js
^http://.+/amdc/mobileDispatch url script-request-body https://service.2ti.st/QuanX/Script/jd_tb_price/main.js
^https?://trade-acs\.m\.taobao\.com/gw/mtop\.taobao\.detail\.getdetail url script-response-body https://service.2ti.st/QuanX/Script/jd_tb_price/main.js
# 京东历史价格备用2: https://github.com/yichahucha/surge
# ^https?://api\.m\.jd\.com/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/jd_price.js
# 京东历史价格备用3: https://github.com/JDHelloWorld/jd_price
# ^https?://api\.m\.jd\.com/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig) url script-response-body https://raw.githubusercontent.com/JDHelloWorld/jd_price/main/jd_price.js
# 淘宝历史价格备用2: https://github.com/yichahucha/surge
# ^http://.+/amdc/mobileDispatch url script-request-body https://raw.githubusercontent.com/yichahucha/surge/master/tb_price.js
# ^https?://trade-acs\.m\.taobao\.com/gw/mtop\.taobao\.detail\.getdetail url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/tb_price.js

# 知乎：https://github.com/id77/QuantumultX/blob/master/Script/zhihu.js
^https:\/\/www\.zhihu\.com\/ url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 Quark/604.1 T7/10.7 SearchCraft/2.7.7 (Baidu; P1 9.0.0)$2
^https://www\.zhihu\.com/question/ url script-response-body https://raw.githubusercontent.com/id77/QuantumultX/master/Script/zhihu.js
^https://zhuanlan\.zhihu\.com/p/ url script-response-body https://raw.githubusercontent.com/id77/QuantumultX/master/Script/zhihu.js
# 知乎备用2: ReWrite

# WPS Office 解锁部分功能
^https?:\/\/account\.wps\.cn\/api\/users url script-response-body https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Wps.js




################################################## Search ##################################################


## Q Search 快捷搜索 (Edit from：https://github.com/mymoonyue/Surge/blob/master/Q-Search_All_In_One.sgmodule)
# yy：音乐
^https:\/\/duckduckgo.com\/\?q=yy\+([^&]+).+ url 302 http://tool.liumingye.cn/music/?page=audioPage&type=migu&name=$1
# tb：淘宝
^https:\/\/duckduckgo.com\/\?q=tb\+([^&]+).+ url 302 taobao://s.taobao.com?q=$1
# jd：京东
^https:\/\/duckduckgo.com\/\?q=jd\+([^&]+).+ url 302 openapp.jdmobile://virtual?params={"des":"productList","keyWord":"$1","from":"search","category":"jump"}
# db：豆瓣
^https:\/\/duckduckgo.com\/\?q=db\+([^&]+).+ url 302 douban:///search?q=$1
# zh: 知乎
^https:\/\/duckduckgo.com\/\?q=zh\+([^&]+).+ https://www.zhihu.com/search?type=content&q=$1 302
# bl: 哔哩哔哩
^https:\/\/duckduckgo.com\/\?q=bl\+([^&]+).+ https://m.bilibili.com/search?keyword=$1 302
# yt: YouTube
^https:\/\/duckduckgo.com\/\?q=yt\+([^&]+).+ https://www.youtube.com/results?search_query=$1 302
# gg: 谷歌
^https:\/\/duckduckgo.com\/\?q=gg\+([^&]+).+ https://www.google.com/search?q=$1 302
# 无指令: 百度(注意，无指令的要放最后)
^https:\/\/duckduckgo.com\/\?q=([^&]+).+ https://www.baidu.com/s?wd=$1 302
